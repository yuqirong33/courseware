<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<title>Document</title>
</head>
<body>
<script type="text/javascript">
	
	/*
		妙味2017年第一期面试题
			http://miaov.com/index.php/news/newsDetail/nid/82
		
		妙味2017年第二期面试题
			http://miaov.com/index.php/news/newsDetail/nid/91
		
		妙味2017年第三期面试题
			http://miaov.com/index.php/news/newsDetail/nid/95	
		
	*/
	
	// var a = 10;
	// sayHi();
	// function sayHi() {
	//     a = a + 10;
	//     console.log(a); //20   30
	//     return a;
	// }
	// console.info(a);//20
	
	// console.info(sayHi() + 10);//40



	/*
		m = 3

		function(n) {
			return add(m + n);
		}

		(function(4) {
			return add(3 + 4);
		})(4)

		add(3 + 4)  m = 7

		function(5) {
			return add(7 + 5);  //12
		}

		function(n) {
			return add(m + n);
		}

	*/


// 	var add = function(m) {
//     var temp = function(n) {
//         return add(m + n);
// 	}
// 	/*

// 	*/
//     temp.toString = function() {
//         return m.toString(2)
//     }
//     return temp;
// }
// 	console.log(add(3)(4)(5));


	

	/*
		在console函数的时候，如果函数的toString被修改了
		那么会调用这个toString
	*/
	// function fn(){

	// }
	// fn.toString = function(){
	// 	let n = 12;
	// 	return n.toString(2);
	// }
	// console.info(fn);
	
	var data = [
    {
        area: '深圳',
        percentage: 15,
        number: 80,
        staytime: 2
    },
    {
        area: '北京',
        percentage: 30,
        number: 150,
        staytime: 4
    },
    {
        area: '广州',
        percentage: 25,
        number: 60,
        staytime: 3
    },
    {
        area: '上海',
        percentage: 30,
        number: 100,
        staytime: 4
    }
];

/*
* 根据指定的字段和规则排序数据
* data Array 要排序的数据
* field string 排序依据的字段
* rule string 排序规则 DESC / ASC
* throw 
*       data is invalid : 要排序的数据不存在或类型不正确
*       field is invalid : 排序参考字段不存在
* return Array 排序后的数据
*/
function mySort(data, field, rule) {
    if (!(data instanceof Array)) {
        throw new TypeError('data is invalid');
    }
    if ( !(field in data[0]) ) {
        throw new RangeError('field is invalid');
    }
    if ( !rule || ['DESC','ASC'].indexOf( (rule = rule.toString().toUpperCase()) ) == -1 ) {
        rule = 'DESC';
    }
    
    data.sort(function(a, b) {
		var v = a[field] - b[field];
		console.log(rule == 'ASC' ? v : -v)
        return rule == 'ASC' ? v : -v;
    });
}

	mySort(data, 'number', 'ASC');
	console.dir( data );



</script>
</body>
</html>